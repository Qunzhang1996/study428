## 问题

构造函数和析构函数可以是虚函数吗？



### 构造函数可以是虚函数吗？

**构造函数不能是虚函数，原因是构造函数在创建对象时必须确定对象类型**。具体的理解就是：

①首先，**在创建一个对象时必须确定其类型。因为类型规定了对象可以进行哪些操作**，所以创建对象时必须确定类型，以防止一些不恰当的操作，否则编译器就会报错。

②其次，因为虚函数是在运行时才确定对象的类型的，**如果构造函数声明为虚函数，那么在构造对象时，由于这个对象还没创建成功，编译器就不知道对象的实际类型**（比如基类还是派生类），就会报错。

③另外，从内存的角度来看，虚函数的调用需要虚表指针，而该指针存放在内存空间中，**如果构造函数声明为虚函数，由于对象还没创建，就没有内存空间，因此就没有虚表指针来调用虚函数（构造函数）了**。



### 析构函数可以是虚函数吗？

如果基类存在虚函数以实现多态，而基类的析构函数没有声明为虚函数，那么**在析构一个指向派生类的基类指针时，就只会调用基类的析构函数，不会调用派生类的析构函数，因此会造成内存泄漏的问题**。



