## 问题

哈希冲突是什么？如何解决？

## 哈希冲突

### 哈希冲突产生的原因

因为通过哈希函数产生的值是有限的，而数据可能比较多，导致通过哈希函数映射后仍有很多不同的数据对应了相同的哈希值，这时候就产生了哈希冲突。

例如，用除留余数法构造一个$H(k)=k\%p$ 的哈希函数，若散列表为 $\{ 18，75，60，43，54，90，46 \}$，$p=7$，那么经过哈希函数计算后的结果为 $\{ 4，5，4，1，5，6，4\}$，可以发现，有些原本不同的数据却对应到了相同的哈希值上了，因此发生了冲突。

### 解决哈希冲突的四种方法

通过构造性能良好的哈希函数，可以减少冲突，但一般不可能完全避免冲突，因此解决冲突是哈希法的另一个关键问题。创建哈希表和查找哈希表都会遇到冲突，两种情况下解决冲突的方法应该一致。下面以创建哈希表为例，说明解决冲突的方法。常用的解决冲突方法有以下四种：

#### 1.开放地址法（也称再散列法）

**基本思想是：**当关键字 key 的哈希地址 $p=H(key)$ 出现冲突时，以 $p$为基础，产生另一个哈希地址 $p1$，如果 $p1$ 仍然冲突，再以 $p$ 为基础，产生另一个哈希地址 $p2$，…，**直到找出一个不冲突的哈希地址 $p_{i}$，将相应元素存入其中**。

这种方法有一个通用的再散列函数形式：
$$
H_{i} = (H(key)+d_{i})\%m,\ \ i=1,2,...,n.\\
其中，H(key)为哈希函数，m 为表长，d_{i}为增量序列。
$$
增量序列 $d_{i}$ 的取值方式不同，相应的再散列方式也不同，主要有以下三种：

##### (1)线性探测

增量序列为： $d_{i}=1,2,...,m-1$

**其特点是：**在发生冲突时，顺序查看表中下一单元，直到找出一个空单元或查遍全表，将冲突的元素存放进去。

##### (2)再平方探测

增量序列为：  $d_{i}=1^2,-1^2,2^2,-2^2,...,k^2,-k^2.\ \ (k\leq m/2)$

**其特点是：**在发生冲突时，在表的左右进行跳跃试探，比较灵活。

##### (3)伪随机探测

增量序列： $d_{i}=伪随机序列$

具体实现时，建立一个伪随机数发生器生成伪随机序列（如2，5，9，......），在发生冲突时，先令 $d_{i}=2$，算出 $H_{i}$，如果还有冲突，则再令 $d_{i}=5$，算出 $H_{i}$，若还有冲突，则继续下去......



#### 2.链式地址法

**基本思想：**将所有哈希地址为 $i$ 的元素构成一个称为同义词链的单链表，并将单链表的头指针存在哈希表的第 $i$ 个单元中，因而查找、插入和删除都比较方便。



#### 3.建立公共溢出区

**基本思想是：**将哈希表分为**基本表**和**溢出表**两部分，凡是和基本表发生冲突的元素，一律填入溢出表中。



#### 4.再哈希表

**基本思想是：**对于冲突的哈希值，再构造另一个哈希函数进行处理，直至没有哈希冲突，也就是同时使用多个哈希函数来处理。


